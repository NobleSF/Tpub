{% extends "base.html" %}
{% load static %}
{% load fontawesome_5 %}

{% block tab_title %}
  {{ shop.name }}
{% endblock tab_title %}

{% block css %}
  <link href="{{ STATIC_URL }}shop/menu.css?v=0" rel="stylesheet">
{% endblock css %}


{% block javascript %}
  <script>
    const SHOP_ID = "{{ shop.id }}";
    const LINE_CHANNEL_URL = "{{ line_channel_membership.line_channel.direct_link_url }}";
    const LINE_CHANNEL_MEMBERSHIP_ID = "{{ line_channel_membership.id }}";
    const DEBUG = {% if debug %}true{% else %}false{% endif %};
    const CSRF_TOKEN = '{{ csrf_token }}';
    var SHOPPING_CART = {{ shopping_cart_json|safe }};
  </script>
  <script src="{{ STATIC_URL }}shop/menu.js?v=0"></script>
{% endblock javascript %}

{% block content %}{% load humanize %}

{#  <h1>{{ shop.name }} Menu</h1>#}


  {% for menu_section in shop.menu.menu_sections.all %}
    <h4 class="font-weight-bold mt-4">
      {{ menu_section.name }}
    </h4>

    {% for item in menu_section.items.all %}
      {% include 'inclusions/menu/menu_item_card.html' with item=item %}
    {% endfor %}
  {% endfor %}

  <div class="" style="height: 5rem;">&nbsp;</div>

  <div class="container fixed-bottom pt-3 border border-top bg-light">

    <div class="row justify-content-center">
      <div class="col-12 col-md-10">

        <div style="display:none;">
          <!-- template order item -->
          <div id="order_item_template" class="order-item"
               data-item_id="" data-quantity="" data-item_name="">
            <div class="d-flex flex-row justify-content-between" >

              <span class="item-name flex-fill">
                item name
              </span>

              <span class="item-quantity">1</span>x

              <span class="item-remove text-muted ml-3" title="remove">
                {% fa5_icon 'times-circle' %}
              </span>

            </div>
          </div>
        </div>

        <div id="order_items" class="card px-4 py-3">
          <!-- order items go here -->
        </div>

        <div class="my-3" style="">
          <button id="checkout" class="btn btn-danger" type="button" style="width: 100%;">
            checkout
          </button>
        </div>

      </div>
    </div>
  </div>


{% endblock content %}

{% block footer %}
  <!-- nothing -->
{% endblock footer %}
